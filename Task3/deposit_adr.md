### <a name="_b7urdng99y53"></a>**Название задачи:** 
### <a name="_hjk0fkfyohdk"></a>**Автор:**
### <a name="_uanumrh8zrui"></a>**Дата:**
### <a name="_3bfxc9a45514"></a>**Функциональные требования**

#### UC1. Подача заявки на депозит на сайте (новый клиент)
#### Действующие лица: Пользователь
#### Описание
1. Пользователь открывает страницу депозитов на сайте.
2. Система показывает список доступных депозитов и актуальные ставки.
3. Пользователь выбирает депозит
4. Пользователю отображается форма где нужно указать ФИО и номер телефона
4. Пользователь заполняет форму и отправляет заявку.
5. Система создаёт заявку со статусом «Черновик/Ожидает подтверждения»
6. Система инициирует отправку СМС-кода на номер пользователя.
7. Пользователь вводит СМС-код.
8. Система проверяет СМС-код и в случае успеха ереводит заявку в статус «Подтверждена клиентом» и направляет на обработку бэк-офису.
9. Система показывает пользователю подтверждение на сайте: "Заявка принята"
<br><br>
#### UC2. Подача заявки на открытие депозита в интернет-банке с подтверждением по СМС (действующий клиент)
#### Действующие лица: Пользователь (клиент интернет-банка)
#### Описание
1. Пользователь открывает раздел депозитов в интернет-банке.
2. Система показывает список доступных депозитов с актуальными и персонализированными ставками.
3. Пользователь выбирает депозит.
4. Пользователь указывает счёт списания и сумму депозита. 
5. Пользователь нажимает «Подать заявку».
6. Система валидирует введённые данные (сумма > 0, счёт выбран).
7. Система создаёт заявку со статусом «Черновик/Ожидает подтверждения».
8. Система инициирует отправку СМС-кода на номер пользователя.
9. Пользователь вводит СМС-код.
10. Система проверяет СМС-код.
11. При успехе система переводит заявку в статус «Подтверждена клиентом» и направляет на обработку бэк-офису.
12. Система показывает пользователю подтверждение: заявка принята и будет обработана.

### <a name="_u8xz25hbrgql"></a>**Нефункциональные требования**
- Отклик по всем операциям должен быть 100–200 мс при нормальной нагрузке.
- Передаются чувствительные данные, поэтому обмен данными должен быть защищён шифрованием трафика (TLS 1.2 и выше).
- Минимизировать прямую работу интернет-банка с API АБС из за перегруженности АБС
- Горизонтальное масштабирование новых компонентов 
- Система должна обеспечивать обработку не менее: 300 RPS на чтение справочных данных, 100 RPS на операции подачи заявок
- Показатели восстановления: RTO ≤ 60 минут, RPO ≤ 15 минут
- Должно быть реализовано резервное копирование данных: периодичность — не реже 1 раза в сутки, срок хранения — 30 дней

### <a name="_qmphm5d6rvi3"></a>**Решение**
 - [Диаграмма контекстов](svg/deposit_context.svg ) 
 - [Диаграмма контейнеров](svg/deposit_containers.svg )

### <a name="_bjrr7veeh80c"></a>**Альтернативы**
Опишите здесь наиболее важные альтернативные решения.
- Прямая интеграция сайта и интернет-банка с АБС
- Использование ядра СМС с доработками со стороны подрядчика

**Недостатки, ограничения, риски**

- Ограничения АБС. Вертикальное масштабирование базы данных и ограниченная пропускная способность API.
- Ограничения платформы интернет-банка. Возможная несовместимость с Kafka и другими современными технологиями
- Риск деградации производительности при росте нагрузки

