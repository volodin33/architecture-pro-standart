@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Context.puml

title MVP «Открытие депозитов» (с интеграцией с АБС)

Person(customer_new, "Новый клиент", "Сайт: смотрит депозиты и оставляет заявку")
Person(customer_ib, "Клиент интернет-банка", "ИБ: заявка + подтверждение СМС")
Person(call_mgr, "Менеджер колл-центра", "Обрабатывает заявку в CRM, предлагает условия")
Person(bo_mgr, "Менеджер бэк-офиса депозитов", "Подтверждает условия депозита и открытие")

System_Boundary(bank, "Банк") {
  System(deposit_mvp, "MVP «Открытие депозитов»", "Приём заявок, статусы, ставки, СМС, интеграции")
  System_Ext(site, "Сайт банка", "Канал для новых клиентов")
  System_Ext(ibank, "Интернет-банк", "Канал для действующих клиентов")
  System_Ext(crm, "CRM / Колл-центр", "Работа менеджеров")
  System_Ext(abs, "АБС", "Открытие депозита, фиксация условий")
  System_Ext(sms_core, "Ядро СМС", "Отправка/проверка СМС-кодов")
}

Rel(customer_new, site, "Подаёт заявку", "HTTPS")
Rel(customer_ib, ibank, "Подаёт заявку и подтверждает СМС", "HTTPS")
Rel(site, deposit_mvp, "Создание заявки, получение ставок", "HTTPS (TLS)")
Rel(ibank, deposit_mvp, "Создание заявки, СМС подтверждение, статус", "HTTPS (TLS)")
Rel(deposit_mvp, crm, "Передача заявок/результатов обработки", "Интеграция")
Rel(call_mgr, crm, "Обрабатывает заявки", "UI")
Rel(deposit_mvp, sms_core, "Отправка/проверка СМС-кода", "Интеграция (адаптер)")
Rel(deposit_mvp, abs, "Создание поручения/заявки на открытие, получение результата (статус/идентификатор)", "Интеграция")
Rel(bo_mgr, abs, "Подтверждает условия и открывает депозит (операции бэк-офиса)", "UI/процесс")

@enduml
