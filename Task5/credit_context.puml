@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Context.puml

title MVP «Кредитный процесс»

Person(customer_new, "Новый клиент", "Сайт: подаёт заявку на кредит, может указать паспортные данные для предварительного решения")
Person(customer_ib, "Клиент интернет-банка", "ИБ: подаёт заявку на кредит/предодобренное предложение и подтверждает СМС-кодом")
Person(branch_mgr, "Сотрудник отделения", "Продолжает работу с заявкой в АБС при визите клиента")
Person(bo_mgr, "Сотрудник кредитного бэк-офиса", "Обрабатывает заявки и решения в кредитном контуре")

System_Boundary(bank, "Банк") {
  System(credit_mvp, "MVP «Подача заявок на кредит»", "Приём заявок из каналов, статусы, СМС, интеграции с кредитным контуром")
  System_Ext(site, "Сайт банка", "Канал для новых клиентов")
  System_Ext(ibank, "Интернет-банк", "Канал для действующих клиентов и предодобренных предложений")
  System_Ext(credit_conv, "Кредитный конвейер", "Обработка заявок, жизненный цикл заявки, решения")
  System_Ext(scoring, "Система кредитного скоринга", "Расчёт решения/лимитов. Критичная система, 24/7")
  System_Ext(abs, "АБС", "Оформление/ведение заявки в отделении")
  System_Ext(sms_core, "Ядро СМС", "Отправка/проверка СМС-кодов")
  System_Ext(bki, "Бюро кредитных историй", "Источник данных для новых клиентов (общие данные)")
}

Rel(customer_new, site, "Подаёт заявку, может указать паспортные данные", "HTTPS")
Rel(customer_ib, ibank, "Подаёт заявку/предодобренную, подтверждает СМС", "HTTPS")
Rel(site, credit_mvp, "Создание заявки, получение статуса", "HTTPS (TLS)")
Rel(ibank, credit_mvp, "Создание заявки, СМС подтверждение, статус", "HTTPS (TLS)")
Rel(credit_mvp, sms_core, "Отправка/проверка СМС-кода", "Интеграция (адаптер)")
Rel(credit_mvp, credit_conv, "Передача заявки, получение статуса/решения", "Интеграция")
Rel(credit_conv, scoring, "Запрос скоринга при необходимости", "Внутренняя интеграция")
Rel(credit_conv, bki, "Запрос данных кредитной истории (новый клиент)", "Интеграция")
Rel(branch_mgr, abs, "Работает с заявкой в отделении", "UI/процесс")
Rel(credit_mvp, abs, "Поиск/привязка заявки для продолжения в отделении (при наличии интеграции)", "Интеграция")
Rel(bo_mgr, credit_conv, "Обрабатывает заявки, принимает решения", "UI/процесс")

@enduml
