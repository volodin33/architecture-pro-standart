### <a name="_b7urdng99y53"></a>**Название задачи:** 
### <a name="_hjk0fkfyohdk"></a>**Автор:**
### <a name="_uanumrh8zrui"></a>**Дата:**
### <a name="_3bfxc9a45514"></a>**Функциональные требования**

#### UC1. Просмотр актуальных ставок оператором внутреннего колл-центра
#### Действующие лица: Оператор колл-центра
#### Описание
1. Оператор открывает карточку консультации/справочник ставок в CRM (или в отдельном интерфейсе банка).
2. Система запрашивает актуальные ставки из “Сервиса ставок”.
3. Оператор выбирает нужный продукт/срок/условия.
4. Система показывает ставку и дату/версию актуальности.
5. Оператор консультирует клиента


#### UC2. Обновление ставок (импорт из XLS) с публикацией новой версии
#### Действующие лица: Сотрудник, отвечающий за ставки
#### Описание
1. Сотрудник загружает новый XLS со ставками.
2. Система валидирует файл (формат, обязательные колонки, диапазоны).
3. Система сохраняет ставки как новую версию с датой начала действия.
4. Система помечает новую версию как “актуальная” (по правилам банка).
5. Система фиксирует факт обновления (кто/когда/какая версия).
6. Система инициирует формирование файла для партнёра.

#### UC3. Формирование и передача файла ставок партнёрскому колл-центру
#### Действующие лица: Система
#### Описание
1. По расписанию или после обновления ставок система формирует экспортный файл по заданному формату (например, CSV/XLSX).
2. В файл добавляется мета-информация: дата формирования, версия ставок, период действия.
3. Файл помещается в согласованный канал передачи (SFTP).
4. Система фиксирует факт выгрузки (успех/ошибка, версия, время).
5. (Опционально) Система уведомляет ответственных сотрудников банка о статусе выгрузки.


### <a name="_u8xz25hbrgql"></a>**Нефункциональные требования**
- Отклик по всем операциям должен быть 100–200 мс при нормальной нагрузке.
- Передаются чувствительные данные, поэтому обмен данными должен быть защищён шифрованием трафика (TLS 1.2 и выше).
- Минимизировать прямую работу интернет-банка с API АБС из за перегруженности АБС
- Горизонтальное масштабирование новых компонентов
- Система должна обеспечивать обработку не менее: 300 RPS на чтение справочных данных, 300 RPS на операции обновления ставок
- Показатели восстановления: RTO ≤ 60 минут, RPO ≤ 15 минут
- Должно быть реализовано резервное копирование данных: периодичность — не реже 1 раза в сутки, срок хранения — 30 дней
- Выгрузка файла должна быть повторяемой: при сбое должна быть возможность повторной выгрузки. Количество попыток: 3.
- Партнёр не использует API-вызовы; передача должна работать реализована через SFTP.

### <a name="_qmphm5d6rvi3"></a>**Решение**
- [Диаграмма контекстов](svg/rates_context.svg )
- [Диаграмма контейнеров](svg/rates_containers.svg )

### <a name="_bjrr7veeh80c"></a>**Альтернативы**
Опишите здесь наиболее важные альтернативные решения.
- Дать партнёру API для получения ставок
- Дать партнёру доступ во внутреннюю систему
- Ручная пересылка файла сотрудниками

**Недостатки, ограничения, риски**

- Ограничения АБС. Вертикальное масштабирование базы данных и ограниченная пропускная способность API.
- Ограничения платформы интернет-банка. Возможная несовместимость с Kafka и другими современными технологиями
- Риск деградации производительности при росте нагрузки

